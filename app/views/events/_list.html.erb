<table class='table'>
  <thead>
    <tr>
      <th>イベント名</th>
      <th>上位アイドル</th>
      <th>1200位ボーダー</th>
      <th>開催期間</th>
    </tr>
  </thead>
  <tbody>
    <%- events.each do |event| %>
      <tr>
        <td>
          <%= event_type_badge(event) %>
          <%- if defined?(current_event) && event.id == current_event.id %>
            <b><%= event.name %></b>
          <%- else %>
            <%= link_to_if event.has_border?, event.name, event_path(event) %>
          <%- end %>
          <%- if current_user.try(:role_admin?) %>
            <small>[<%= link_to 'Edit', edit_event_path(event) %>]</small>
          <%- end %>
        </td>
        <td>
          <%= prizes_text_for(event.prizes.to_a) %>
        </td>
        <td>
          <%- border_1200 = event.final_borders.select{|b| b.rank == 1200}.first.try(:point) %>
          <%= border_1200 ? "#{number_to_currency(border_1200, unit: '', precision: 0)}pt" : '-' %>
          <%- if event.records_available? %>
            <%= link_to event_records_path(event, page: event.hhp_event? ? nil : 24) do %>
              <span class='glyphicon glyphicon-link'></span>
            <%- end %>
          <%- end %>
        </td>
        <td><%= event.format_period %></td>
      </tr>
    <%- end %>
  </tbody>
</table>
